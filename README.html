
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Голосовой ассистент</title>
</head>
<body>

<button onclick="startRecognition()">Говори</button>
<p id="result">Скажи что-нибудь</p>

<script>
let userName = null;
let assistantName = "Великан";

function startRecognition() {
  const SpeechRecognition =
    window.SpeechRecognition || window.webkitSpeechRecognition;

  const recognition = new SpeechRecognition();
  recognition.lang = "ru-RU";

  recognition.onresult = (event) => {
    const text = event.results[0][0].transcript.toLowerCase();
    document.getElementById("result").innerText = text;

    handleSpeech(text);
  };

  recognition.start();
}

function handleSpeech(text) {

  // если имя ещё не известно
  if (!userName) {
    if (text.includes("меня зовут")) {
      userName = text.replace("меня зовут", "").trim();
      speak(`О, круто! Тебя зовут ${userName}. А меня зовут ${assistantName}. Приятно познакомиться!`);
      return;
    } else {
      speak("Как тебя зовут? Скажи: меня зовут...");
      return;
    }
  }

  // диалог после знакомства
  const dialogs = [
    {
      keywords: ["как дела"],
      answer: `У меня всё отлично, ${userName}! А у тебя?`
    },
    {
      keywords: ["как тебя зовут"],
      answer: `Меня зовут ${assistantName}`
    },
    {
      keywords: ["привет"],
      answer: `Привет, ${userName}!`
    },
    {
      keywords: ["что ты умеешь"],
      answer: `Я могу с тобой разговаривать и запоминать тебя`
    }
  ];

  for (let dialog of dialogs) {
    for (let key of dialog.keywords) {
      if (text.includes(key)) {
        speak(dialog.answer);
        return;
      }
    }
  }

  // если не понял
  speak(`${userName}, я тебя не понял. Скажи что-нибудь другое`);
}

function speak(text) {
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = "ru-RU";
  speechSynthesis.speak(utterance);
}
</script>

</body>
</html>
