<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</title>
</head>
<body>
<h1>–ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</h1>
<button id="btn">üé§ –ì–æ–≤–æ—Ä–∏</button>
<p id="result">–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –∏ –≥–æ–≤–æ—Ä–∏</p>

<script>
let userName = null;
const assistantName = "–í–µ–ª–∏–∫–∞–Ω";

const btn = document.getElementById("btn");
const result = document.getElementById("result");

const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

if (!SpeechRecognition) {
  alert("–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–∞—à–∏–º –±—Ä–∞—É–∑–µ—Ä–æ–º");
}

const recognition = new SpeechRecognition();
recognition.lang = "ru-RU";
recognition.continuous = false;

btn.onclick = () => {
  recognition.start();
};

recognition.onresult = (event) => {
  const text = event.results[0][0].transcript.toLowerCase();
  result.innerText = text;

  // –ï—Å–ª–∏ –∏–º—è –µ—â—ë –Ω–µ –∑–∞–¥–∞–Ω–æ
  if (!userName) {
    if (text.includes("–º–µ–Ω—è –∑–æ–≤—É—Ç")) {
      userName = text.replace("–º–µ–Ω—è –∑–æ–≤—É—Ç", "").trim();
      speak(`–û, –∫—Ä—É—Ç–æ! –¢–µ–±—è –∑–æ–≤—É—Ç ${userName}. –ê –º–µ–Ω—è –∑–æ–≤—É—Ç ${assistantName}`);
    } else {
      speak("–°–∫–∞–∂–∏: –º–µ–Ω—è –∑–æ–≤—É—Ç...");
    }
    return;
  }

  // –ü—Ä–æ—Å—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã
  if (text.includes("–ø—Ä–∏–≤–µ—Ç")) {
    speak(`–ü—Ä–∏–≤–µ—Ç, ${userName}!`);
  } else if (text.includes("–∫–∞–∫ –¥–µ–ª–∞")) {
    speak(`–£ –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ, ${userName}. –ê —É —Ç–µ–±—è?`);
  } else if (text.includes("–∫–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç")) {
    speak(`–ú–µ–Ω—è –∑–æ–≤—É—Ç ${assistantName}`);
  } else {
    speak(`${userName}, —è —Ç–µ–±—è —É—Å–ª—ã—à–∞–ª, –Ω–æ –ø–æ–∫–∞ –Ω–µ –∑–Ω–∞—é —á—Ç–æ –æ—Ç–≤–µ—Ç–∏—Ç—å`);
  }
};

function speak(text) {
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = "ru-RU";
  speechSynthesis.speak(utterance);
}
</script>
</body>
</html>
